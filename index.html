<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clpin</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#eef2f7;
  text-align:center;
}

/* الشريط العلوي */
header{
  background:#2da7ff;
  color:white;
  padding:16px;
  font-size:22px;
  font-weight:bold;
}

/* الصناديق */
.box{
  background:white;
  width:90%;
  max-width:400px;
  margin:20px auto;
  padding:18px;
  border-radius:14px;
  box-shadow:0 4px 15px rgba(0,0,0,.1);
}

input{
  width:90%;
  padding:12px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}

button{
  width:95%;
  padding:12px;
  margin-top:12px;
  border:none;
  border-radius:12px;
  background:#2da7ff;
  color:white;
  font-size:16px;
  cursor:pointer;
}

button:hover{
  background:#1b8de0;
}

#result{
  margin-top:15px;
}

/* بطاقة المستخدم */
.user{
  background:#f7f9fc;
  padding:12px;
  border-radius:12px;
  margin-top:10px;
  text-align:right;
}
</style>
</head>

<body>

<header>Clpin</header>

<!-- إنشاء حساب -->
<div class="box">
<h3>إنشاء حساب</h3>

<input id="email" placeholder="البريد الإلكتروني">
<input id="password" type="password" placeholder="كلمة المرور">
<input id="username" placeholder="@username">

<button onclick="registerUser()">تسجيل</button>
</div>

<!-- تسجيل دخول -->
<div class="box">
<h3>تسجيل الدخول</h3>

<input id="loginEmail" placeholder="البريد الإلكتروني">
<input id="loginPassword" type="password" placeholder="كلمة المرور">

<button onclick="loginUser()">دخول</button>
</div>

<!-- البحث -->
<div class="box">
<h3>البحث عن مستخدم</h3>

<input id="searchInput" placeholder="@username">
<button onclick="doSearch()">بحث</button>

<div id="result"></div>
</div>


<!-- ربط الجافاسكربت -->
<script type="module">

import { register, login } from "./auth.js";
import { searchUser } from "./search.js";

/* تسجيل */
window.registerUser = ()=>{
  const email = document.getElementById("email").value;
  const pass = document.getElementById("password").value;
  const user = document.getElementById("username").value;

  if(!email || !pass || !user){
    alert("املأ جميع الحقول");
    return;
  }

  register(email, pass, user);
};

/* دخول */
window.loginUser = ()=>{
  const email = document.getElementById("loginEmail").value;
  const pass = document.getElementById("loginPassword").value;

  if(!email || !pass){
    alert("اكتب البريد وكلمة المرور");
    return;
  }

  login(email, pass);
};

/* بحث */
window.doSearch = ()=>{
  const name = document.getElementById("searchInput").value;

  if(!name){
    alert("اكتب اسم المستخدم");
    return;
  }

  searchUser(name);
};

</script>

</body>
</html>
